import{_ as r}from"./image-20230528151159275-9c1d4dd8.js";import{_ as n,r as t,o as s,c as l,a,b as i,d as o,e as c}from"./app-80646ede.js";const d="/assets/image-20230528151547172-fac3223a.png",h="/assets/image-20230528151719225-c7407937.png",p="/assets/image-20230528152109206-71a4ef25.png",u="/assets/image-20230528152301318-c5182aac.png",T={},N=c('<h1 id="turn-traversal-using-relay-nat" tabindex="-1"><a class="header-anchor" href="#turn-traversal-using-relay-nat" aria-hidden="true">#</a> TURN (Traversal Using Relay NAT)</h1><p>​ TURN (Traversal Using Relay NAT) 是一种网络协议，其目的时解决对称NAT无法穿越的问题。与STUN协议不同，TURN协议通过**中转服务器（relay server）**来传输数据，以便在NAT后面的设备之间实现直接通信。</p><p>​ TURN是建立在STUN之上，消息格式使用STUN格式消息</p><h2 id="过程" tabindex="-1"><a class="header-anchor" href="#过程" aria-hidden="true">#</a> 过程</h2><p><img src="'+r+'" alt="image-20230528151159275"></p><h3 id="turn使用的传输协议" tabindex="-1"><a class="header-anchor" href="#turn使用的传输协议" aria-hidden="true">#</a> TURN使用的传输协议</h3><p><img src="'+d+'" alt="image-20230528151547172"></p><h3 id="turn-allocate-分配端口" tabindex="-1"><a class="header-anchor" href="#turn-allocate-分配端口" aria-hidden="true">#</a> TURN Allocate（分配端口）</h3><p>假设TURN client之前通过信令服务器拿到了Peer A和PeerB的地址</p><p><img src="'+h+'" alt="image-20230528151719225"></p><h3 id="turn-send-and-data" tabindex="-1"><a class="header-anchor" href="#turn-send-and-data" aria-hidden="true">#</a> TURN SEND And Data</h3><p><img src="'+p+'" alt="image-20230528152109206"></p><h4 id="turn-channels" tabindex="-1"><a class="header-anchor" href="#turn-channels" aria-hidden="true">#</a> TURN Channels</h4><p><img src="'+u+'" alt="image-20230528152301318"></p><h2 id="使用turn打通" tabindex="-1"><a class="header-anchor" href="#使用turn打通" aria-hidden="true">#</a> 使用TURN打通</h2><ol><li>STUN binding</li></ol><p>TURN server和TURN client打通</p><ol start="2"><li>Caller Turn allocation</li><li>Caller sends offer</li></ol><p>通过信令发送sdp给callee</p><ol start="4"><li>Callee Turn allocation</li><li>Callee answers OK</li></ol><p>通过信令给Caller回answer</p><ol start="6"><li>Exchange candidate IP addresses</li></ol><p>offer和answer都是sdp，里面有candidate</p><ol start="6"><li>ICE check for P2P connection</li><li>If P2P unsuccessful,make relay connection</li></ol><hr><p>参考文章：</p>',26),m={href:"https://datatracker.ietf.org/doc/rfc5766/",target:"_blank",rel:"noopener noreferrer"};function _(f,g){const e=t("ExternalLinkIcon");return s(),l("div",null,[N,a("ol",null,[a("li",null,[a("a",m,[i("RFC 5766 - Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)"),o(e)])])])])}const x=n(T,[["render",_],["__file","TURN.html.vue"]]);export{x as default};
